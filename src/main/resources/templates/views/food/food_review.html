<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:with="logged_user=${#authentication.principal.user}">
    <head>
        <meta charset="UTF-8">
        <title>Food Detail/Review</title>
        <link rel="stylesheet" type="text/css" th:href="@{/food/css/food.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/map.css}">
        <!--    <link rel="stylesheet" href="/src/main/resources/static/food/css/food.css">-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <script src="https://kit.fontawesome.com/821e8d3801.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" crossorigin="anonymous"></script>
    </head>
    <script th:inline="javascript">
        const logged_id = [[${logged_user.userId}]];
    </script>
    <body>

    <div id="container">
        <h2>Í¥ÄÍ¥ëÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ</h2>
        <div id="">Í¥ÄÍ¥ëÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ</div>
        <!-- ÏûÑÏãú -->
        <input type="button" value="Î™®Îã¨Ï∞Ω Ïó¥Í∏∞" onclick="openBtn()">
    </div>
    <div id="modal" class="modal-overlay">
        <div class="modal-window">
            <div class="close-area">X</div>
            <!--            <input type="button" name="scrapFood"><i class="fa-regular fa-bookmark" class="scraptFood"></i>-->
            <input type="checkbox" name="scraptFood">
            <div class="title">
                <div class="store_name"><span th:text="${foodrow?.storeName}"></span></div>
                <div class="store_address"><span th:text="${foodrow?.storeAddress}"></span></div>
                <div class="store_tel"><span th:text="${foodrow?.storeTel}"></span></div>
            </div>
            <hr>
            <div id="showContent">
                <div id="foodImage">ÏùåÏãùÏ†ê Ïù¥ÎØ∏ÏßÄ</div>
                <div id="reviewShowStar">
                    <span>ÌèâÏ†ê</span>
                    <span class="reviewShowStar" th:text="${reviewAvg}"></span>
                </div>
                <!-- ÌïòÎÇò -->
                <div id="reviewShowCategory">
                    <span>Î¶¨Î∑∞</span>
                    <span class="reviewShowCategory" th:text="${reviewCategory}"></span>
                </div>
                <input type="button" value="Î¶¨Î∑∞ÎÇ®Í∏∞Í∏∞" onclick="getShow()">

            </div>
            <form th:action="@{/food/food_review}" method="post" enctype="application/x-www-form-urlencoded">
                <input type="hidden" name="reviewId" th:value="${reviewId}">
                <input id="foodid" type="hidden" name="foodId" th:value="${foodrow?.foodId}">

                <div id="content" style="display: none;">

                    <div class="container mt-3 mb-3 border rounded">
                        <!--                        <div class="mb-3 mt-3">-->
                        <label>Ï≤®Î∂ÄÌååÏùº:</label>
                        <!--                            <div id="files">-->
                        <!--                                <div class="input-group mb-2">-->
                        <!--                                    <input class="form-control col-xs-3" type="file" name="upfile${i}"/>-->
                        <!--                                    <button type="button" class="btn btn-outline-danger" onclick="$(this).parent().remove()">ÏÇ≠Ï†ú</button>-->
                        <!--                                </div>-->
                        <!--                            </div>-->
                        <!--                        </div>-->
                    </div>
                    <!--                    <div class="foodImage">-->
                    <!--                        <span>ÏùåÏãùÏ†ê Ïù¥ÎØ∏ÏßÄ</span>-->
                    <!-- Ïù¥ÎØ∏ÏßÄ ÌååÏùºÎßå -->
                    <!--                        <input type="file" class="real-upload" accept="image/*" required multiple>-->
                    <!-- Îã§Ï§ë ÌååÏùº ÏóÖÎ°úÎìú -->
                    <!--                        <div class="upload">-->
                    <!--                            <ul class="image-preview">ÎùÑÏõåÏ°∞.</ul>-->
                    <!--                        </div>-->
                    <!-- Ïù¥ÎØ∏ÏßÄ Î≥¥Ïó¨Ï£ºÍ∏∞ -->
                    <!--                    <div th:each="attachment : ${foodrow?.fileList}">-->
                    <!--                        <img src = "@{'/upload/' + ${attachment.fileName}}" class="img-thumbnail">-->
                    <!--                    </div>-->
                    <!--                    </div>-->
                    <!--                    </div>-->
                    <div class="mid">
                        <div id="userId">
                            <span>ÌöåÏõêID</span>
                            <input type="hidden" name="userId" th:value="${logged_user.userId}">
                        </div>
                        <div id="reviewStar">
                            <fieldset class="rate">
                                <span>ÌèâÏ†ê</span>
                                <input type="radio" id="rating10" name="reviewStar" value="5.0">
                                <label for="rating10" title="5Ï†ê"></label>
                                <input type="radio" id="rating9" name="reviewStar" value="4.5">
                                <label class="half" for="rating9" title="4.5Ï†ê"></label>
                                <input type="radio" id="rating8" name="reviewStar" value="4.0">
                                <label for="rating8" title="4Ï†ê"></label>
                                <input type="radio" id="rating7" name="reviewStar" value="3.5">
                                <label class="half" for="rating7" title="3.5Ï†ê"></label>
                                <input type="radio" id="rating6" name="reviewStar" value="3.0">
                                <label for="rating6" title="3Ï†ê"></label>
                                <input type="radio" id="rating5" name="reviewStar" value="2.5">
                                <label class="half" for="rating5" title="2.5Ï†ê"></label>
                                <input type="radio" id="rating4" name="reviewStar" value="2.0">
                                <label for="rating4" title="2Ï†ê"></label>
                                <input type="radio" id="rating3" name="reviewStar" value="1.5">
                                <label class="half" for="rating3" title="1.5Ï†ê"></label>
                                <input type="radio" id="rating2" name="reviewStar" value="1.0">
                                <label for="rating2" title="1Ï†ê"></label>
                                <input type="radio" id="rating1" name="reviewStar" value="0.5">
                                <label class="half" for="rating1" title="0.5Ï†ê"></label>
                                <input type="hidden" id="rating" name="rating" value="">
                            </fieldset>
                        </div>
                    </div>
                    <div id="reviewCat">
                        <span>Î¶¨Î∑∞</span>
                        <div class="keyword">
                            <ul class="category">
                                <li class="category-comment">
                                    <input type="checkbox" class="checkComment" id="reviewCategory1"
                                           name="reviewCategory" value="ÏùåÏãùÏù¥ ÎßõÏûàÏñ¥Ïöî">
                                    <label for="reviewCategory1" class="label-comment">
                                        üòä ÏùåÏãùÏù¥ ÎßõÏûàÏñ¥Ïöî
                                    </label>
                                </li>
                                <li class="category-comment">
                                    <input type="checkbox" class="checkComment" id="reviewCategory2"
                                           name="reviewCategory" value="ÏπúÏ†àÌï¥Ïöî">
                                    <label for="reviewCategory2" class="label-comment">
                                        üíì ÏπúÏ†àÌï¥Ïöî
                                    </label>
                                </li>
                                <li class="category-comment">
                                    <input type="checkbox" class="checkComment" id="reviewCategory3"
                                           name="reviewCategory" value="Î∑∞Í∞Ä Ï¢ãÏïÑÏöî">
                                    <label for="reviewCategory3" class="label-comment">
                                        üåâ Î∑∞Í∞Ä Ï¢ãÏïÑÏöî
                                    </label>
                                </li>
                                <li class="category-comment">
                                    <input type="checkbox" class="checkComment" id="reviewCategory4"
                                           name="reviewCategory" value="ÌòºÎ∞•ÌïòÍ∏∞ Ï¢ãÏïÑÏöî">
                                    <label for="reviewCategory4" class="label-comment">
                                        üçô ÌòºÎ∞•ÌïòÍ∏∞ Ï¢ãÏïÑÏöî
                                    </label>
                                </li>
                                <li class="category-comment">
                                    <input type="checkbox" class="checkComment" id="reviewCategory5"
                                           name="reviewCategory" value="Îß§Ïû•Ïù¥ ÎÑìÏñ¥Ïöî">
                                    <label for="reviewCategory5" class="label-comment">
                                        üëÄ Îß§Ïû•Ïù¥ ÎÑìÏñ¥Ïöî
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="category-content">
                            <textarea class="reviewComment" name="reviewContent" cols="15" rows="10"
                                      placeholder="ÏßÅÏ†ë ÌõÑÍ∏∞Î•º ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî" th:value="${reviewContent}"></textarea>
                        </div>
                        <button type="submit" id="cancel" class="btn btn-outline-dark" value="Ï∑®ÏÜå" onclick="getCancel()">
                            Ï∑®ÏÜå
                        </button>
                        <button type="submit" id="ok" class="btn btn-outline-dark" value="ÏûëÏÑ±ÏôÑÎ£å" onclick="getHide()">
                            ÏûëÏÑ±ÏôÑÎ£å
                        </button>
                    </div>
                </div>
            </form>
            <!-- Î¶¨Î∑∞Ïùò ÏßÄÎèÑ ÏúÑÏπò -->
            <div class="foodMap">
                <th:block th:insert="~{common/foodMap::commonMap}"></th:block>
            </div>
        </div>
    </div>
    </body>
</th:block>
<script th:src="@{/food/js/food.js}"></script>
<script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8c1b1b874a51038bccf3ed41dd217837&libraries=services,clusterer,drawing"></script>
<!--<script src="/src/main/resources/static/food/js/food.js"></script>-->
<!-- <script th:src="@{/food/js/food_image.js}"></script> -->
<script th:src="@{/common/js/foodMap.js}"></script>
</html>